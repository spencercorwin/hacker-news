(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,n){e.exports=n(46)},40:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),o=n.n(c),i=n(26),s=n(27),l=n(14),u=n(15),m=n(21);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(40);var h=n(8),p={homePage:{list:[],articles:[],counter:10,currentIndex:0,isLoading:!1},discuss:{comments:{},article:{},isLoading:!1}},d=Object(l.combineReducers)({homePage:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.homePage,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"HOMEPAGE::GET_LIST":return Object(h.a)({},e,{isLoading:!0});case"HOMEPAGE::RECEIVE_LIST":return Object(h.a)({},e,{list:t.json,isLoading:!1});case"HOMEPAGE::GET_ARTICLES":return Object(h.a)({},e,{isLoading:!0});case"HOMEPAGE::RECEIVE_ARTICLES":return Object(h.a)({},e,{articles:t.json,isLoading:!1});case"HOMEPAGE::PREVIOUS_PAGE":return Object(h.a)({},e,{currentIndex:e.currentIndex-e.counter});case"HOMEPAGE::NEXT_PAGE":return Object(h.a)({},e,{currentIndex:e.currentIndex+e.counter});case"HOMEPAGE::TOGGLE_COUNTER":return Object(h.a)({},e,{counter:10===e.counter?20:10});case"HOMEPAGE::RESET_INDEX":return Object(h.a)({},e,{currentIndex:0});default:return e}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.homePage,arguments.length>1?arguments[1]:void 0)},discuss:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.discuss,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DISCUSS::FETCH_ARTICLE_START":return Object(h.a)({},e,{isLoading:!0});case"DISCUSS::RECEIVE_ARTICLE":return Object(h.a)({},e,{article:Object(h.a)({},t.json)});case"DISCUSS::REQUEST_COMMENTS":return Object(h.a)({},e,{isLoading:!0});case"DISCUSS::RECEIVE_COMMENTS":return Object(h.a)({},e,{isLoading:!1,comments:Object(h.a)({},t.json)});default:return e}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.discuss,arguments.length>1?arguments[1]:void 0)}}),g=n(29),E=n(1),f=n(2),O=n(4),b=n(3),j=n(5),v=n(6),y=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).changeSort=function(e){var t=n.props,a=t.resetIndex,r=t.history.push;a&&a(),r("/".concat(e))},n.addClassIfActive=function(e){return n.props.location.pathname.includes(e)?" active":""},n}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"head"},r.a.createElement("span",{className:"title"},"Almost Hacker News"),r.a.createElement("span",{className:"space"},"|"),r.a.createElement("span",{className:"sort".concat(this.addClassIfActive("topstories")),onClick:function(){return e.changeSort("topstories")}},"Top Stories"),r.a.createElement("span",{className:"space"},"|"),r.a.createElement("span",{className:"sort".concat(this.addClassIfActive("newstories")),onClick:function(){return e.changeSort("newstories")}},"New Stories"),r.a.createElement("span",{className:"space"},"|"),r.a.createElement("span",{className:"sort".concat(this.addClassIfActive("beststories")),onClick:function(){return e.changeSort("beststories")}},"Best Stories"))}}]),t}(r.a.PureComponent),C=Object(v.e)(y),w=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).getUrl=function(e){return e.replace(/(http(s)?:\/\/)|(\/.*){1}/g,"")},n.toDiscussPage=function(e){var t=n.props,a=t.history,r=t.location.pathname;a.push("".concat(r,"/").concat(e))},n.keyDownToDiscussPage=function(e,t){"Enter"===e.key&&n.toDiscussPage(t)},n}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.article;return t||console.log({article:t}),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"},r.a.createElement("span",{className:"title"},t&&t.url?r.a.createElement("a",{href:t.url},t.title):r.a.createElement("span",{onClick:function(){return e.toDiscussPage(t.id)}},t.title)),r.a.createElement("span",{className:"url"},t&&t.url&&this.getUrl(t.url))),r.a.createElement("div",{className:"more-info"},r.a.createElement("span",null,t.score," points"),r.a.createElement("span",null,"by"),r.a.createElement("span",null,t.by),r.a.createElement("span",{className:"cursor",tabIndex:0,onClick:function(){return e.toDiscussPage(t.id)},onKeyDown:function(n){return e.keyDownToDiscussPage(n,t.id)}},t.descendants," comments")))}}]),t}(r.a.Component),A=Object(v.e)(w),I=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.article,n=e.index;return r.a.createElement("div",{className:"article"},r.a.createElement("div",{className:"left"},n+1),r.a.createElement("div",{className:"right"},r.a.createElement(A,{article:t})))}}]),t}(r.a.Component),P=Object(v.e)(I),k=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).switchPage=function(e){var t=e.direction,a=e.sortBy;n.props.switchPage({direction:t,sortBy:a})},n.onKeyDownSwitchPage=function(e,t){var a=t.direction,r=t.sortBy;"Enter"===e.key&&n.switchPage({direction:a,sortBy:r})},n.toggleArticlesCount=function(e){n.props.toggleArticlesCount(e)},n.onKeyDownToggleArticlesCount=function(e,t){"Enter"===e.key&&n.toggleArticlesCount(t)},n}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.articles,a=t.currentIndex,c=t.counter,o=t.location.pathname;return r.a.createElement("div",{className:"content"},n.map(function(e,t){return r.a.createElement(P,{key:t+a,article:e,index:t+a})}),r.a.createElement("div",{className:"more"},0!==a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{onClick:function(){return e.switchPage({direction:"previous",sortBy:o})},onKeyDown:function(t){return e.onKeyDownSwitchPage(t,{direction:"next",sortBy:o})}},a>0?"Before":""),r.a.createElement("span",{className:"space"},"|")),r.a.createElement("span",{onClick:function(){return e.switchPage({direction:"next",sortBy:o})},onKeyDown:function(t){return e.onKeyDownSwitchPage(t,{direction:"next",sortBy:o})},tabIndex:0},"Next"),r.a.createElement("span",{className:"space"},"|"),10===c?r.a.createElement("span",{onClick:function(){return e.toggleArticlesCount(o)},tabIndex:0,onKeyDown:function(t){return e.onKeyDownToggleArticlesCount(t,o)}},"Show 20 articles"):r.a.createElement("span",{onClick:function(){return e.toggleArticlesCount(o)},tabIndex:0,onKeyDown:function(t){return e.onKeyDownToggleArticlesCount(t,o)}},"Show 10 articles")))}}]),t}(r.a.PureComponent),S=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("img",{alt:"",src:"https://cdn.friendbuy.com/widget/images/shared/spinner.svg"}))}}]),t}(r.a.PureComponent),x=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(c)))).content=function(){var e=n.props,t=e.articles,a=e.isLoading,c=e.currentIndex,o=e.fetchArticles,i=e.location,s=e.switchPage,l=e.toggleArticlesCount,u=e.counter;return a?r.a.createElement(S,null):r.a.createElement(k,{articles:t,isLoading:a,currentIndex:c,switchPage:s,fetchArticles:o,location:i,toggleArticlesCount:l,counter:u})},n}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(C,{resetIndex:this.props.resetIndex}),r.a.createElement(v.b,{exact:!0,path:"/**/",component:this.content}))}}]),t}(r.a.Component),N=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.articles,n=e.currentIndex,a=e.fetchArticles,c=e.isLoading,o=e.location,i=e.switchPage,s=e.history,l=e.toggleArticlesCount,u=e.counter,m=e.resetIndex;return r.a.createElement(x,{fetchArticles:a,location:o,articles:t,currentIndex:n,isLoading:c,history:s,switchPage:i,toggleArticlesCount:l,counter:u,resetIndex:m})}}]),t}(r.a.Component),T=function(e){return function(t){return t({type:"HOMEPAGE::GET_LIST"}),fetch("https://hacker-news.firebaseio.com/v0/".concat(e,".json")).then(function(e){return e.json()}).then(function(e){t({type:"HOMEPAGE::RECEIVE_LIST",json:{json:e}.json}),t(function(e,t){var n=t().homePage,a=n.list,r=n.currentIndex,c=n.counter,o=[];e({type:"HOMEPAGE::GET_ARTICLES"}),a.slice(r,r+c).map(function(t){return fetch("https://hacker-news.firebaseio.com/v0/item/".concat(t,".json")).then(function(e){return e.json()}).then(function(t){o.push(t),o.length===c&&e({type:"HOMEPAGE::RECEIVE_ARTICLES",json:o})})})})})}},L=function(e){var t=e.direction,n=e.sortBy;return function(e){"previous"===t&&e({type:"HOMEPAGE::PREVIOUS_PAGE"}),"next"===t&&e({type:"HOMEPAGE::NEXT_PAGE"}),e(T(n))}},D=function(){return{type:"HOMEPAGE::RESET_INDEX"}},_=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){var e=n.props;(0,e.fetchArticles)(e.location.pathname)},n}return Object(j.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.location.pathname,a=t.fetchArticles;e.location.pathname!==n&&a(n)}},{key:"render",value:function(){var e=this.props,t=e.articles,n=e.currentIndex,a=e.fetchArticles,c=e.isLoading,o=e.location,i=e.history,s=e.switchPage,l=e.toggleArticlesCount,u=e.counter,m=e.resetIndex;return r.a.createElement(N,{fetchArticles:a,location:o,articles:t,currentIndex:n,isLoading:c,history:i,switchPage:s,toggleArticlesCount:l,counter:u,resetIndex:m})}}]),t}(r.a.Component),R=Object(v.e)(Object(u.b)(function(e){return{articles:e.homePage.articles,isLoading:e.homePage.isLoading,currentIndex:e.homePage.currentIndex,counter:e.homePage.counter}},{fetchArticles:T,switchPage:L,toggleArticlesCount:function(e){return function(t){t({type:"HOMEPAGE::TOGGLE_COUNTER"}),t(T(e))}},resetIndex:D})(_)),G=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.article;return r.a.createElement("div",{className:"article"},r.a.createElement("div",{className:"right"},r.a.createElement(A,{article:e}),r.a.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:e&&void 0!==e.text?e.text:""}})))}}]),t}(r.a.Component),M=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.toggleView;return r.a.createElement("div",{className:"comment-space",onClick:e},r.a.createElement("div",null))}}]),t}(r.a.PureComponent),V=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).toggleView=function(){n.props.toggleView&&n.props.toggleView()},n}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.comments,n=e.comment,a=e.childrenCommentsArray,c=e.isFirstRender,o=void 0!==c&&c;return!n.kids&&o?r.a.createElement("div",{className:"comment",dangerouslySetInnerHTML:{__html:n.text?n.text:""}}):n.kids?r.a.createElement("div",null,a(t,n.kids).map(function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("div",{className:"comment",dangerouslySetInnerHTML:{__html:e.text?e.text:""}}),e.kids&&r.a.createElement(U,{comment:e,comments:t,childrenCommentsArray:a}))})):null}}]),t}(r.a.Component),H=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).toggleView=function(){n.props.toggleView&&n.props.toggleView()},n}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.comment,n=t.by,a=t.id,c=t.parent,o=e.isOpen;return r.a.createElement("div",{className:"more-info"},r.a.createElement("span",{className:"id: ".concat(a,", parent: ").concat(c)},n),r.a.createElement("span",null,"some time ago"),r.a.createElement("span",{className:"cursor",onClick:this.toggleView},o?"[-]":"[+]"))}}]),t}(r.a.Component),U=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!0},n.toggleView=function(){return n.setState({isOpen:!n.state.isOpen})},n}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state.isOpen,t=this.props,n=t.comment.id,a=t.comment,c=t.comments,o=t.childrenCommentsArray,i=t.isFirstRender,s=void 0!==i&&i;return r.a.createElement("div",{className:"comments-container",key:c[n].id},!s&&r.a.createElement(M,{toggleView:this.toggleView}),r.a.createElement("div",null,r.a.createElement(H,{isOpen:e,comment:a,toggleView:this.toggleView}),e&&r.a.createElement(V,{comments:c,comment:a,isFirstRender:s,toggleView:this.toggleView,isOpen:e,childrenCommentsArray:o})))}}]),t}(r.a.Component),F=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.article,n=e.article.kids,a=e.comments,c=e.childrenCommentsArray;return r.a.createElement("div",{className:"content"},r.a.createElement(G,{article:t}),t.id&&n&&c&&c(a,n).map(function(e){return r.a.createElement(U,{comments:a,comment:e,childrenCommentsArray:c,key:e.id,isFirstRender:!0})}))}}]),t}(r.a.Component),B=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.resetIndex,n=e.isLoading,a=e.comments,c=e.article,o=e.childrenCommentsArray;return r.a.createElement("div",null,r.a.createElement(C,{resetIndex:t}),n?r.a.createElement("div",{className:"loading"},r.a.createElement("img",{alt:"",src:"https://cdn.friendbuy.com/widget/images/shared/spinner.svg"})):r.a.createElement(F,{comments:a,article:c,childrenCommentsArray:o}))}}]),t}(r.a.Component),K=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).childrenCommentsArray=function(e,t){return Object.values(e).filter(function(e){return t.includes(e&&e.id)})},n}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.location,n=e.history,a=e.isLoading,c=e.switchPage,o=e.fetchArticleForDiscussPage,i=e.resetIndex,s=e.comments,l=e.article;return r.a.createElement(B,{location:t,history:n,isLoading:a,switchPage:c,fetchArticleForDiscussPage:o,resetIndex:i,comments:s,article:l,childrenCommentsArray:this.childrenCommentsArray})}}]),t}(r.a.Component),X=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.fetchArticleForDiscussPage)(e.location.pathname.split("/")[2])}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.location,n=e.history,a=e.isLoading,c=e.switchPage,o=e.fetchArticleForDiscussPage,i=e.resetIndex,s=e.article,l=e.comments;return r.a.createElement(K,{location:t,history:n,isLoading:a,switchPage:c,fetchArticleForDiscussPage:o,resetIndex:i,comments:l,article:s})}}]),t}(r.a.Component),W=Object(v.e)(Object(u.b)(function(e){return{isLoading:e.discuss.isLoading,article:e.discuss.article,comments:e.discuss.comments}},{switchPage:L,fetchArticleForDiscussPage:function(e){return function(t){return t({type:"DISCUSS::FETCH_ARTICLE_START"}),fetch("https://hacker-news.firebaseio.com/v0/item/".concat(e,".json")).then(function(e){return e.json()}).then(function(e){e&&e.kids&&t(function e(t,n,a){return function(r){t.length&&t.forEach(function(t){return fetch("https://hacker-news.firebaseio.com/v0/item/".concat(t,".json")).then(function(c){return c.json().then(function(c){n[t]=c,c&&c.kids&&r(e(c.kids,n,a)),Object.keys(n).length===a&&r({type:"DISCUSS::RECEIVE_COMMENTS",json:n})})})})}}(e.kids,{},e.descendants)),t({type:"DISCUSS::RECEIVE_ARTICLE",json:e})})}},resetIndex:D})(X)),J=function(e){function t(){return Object(E.a)(this,t),Object(O.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.location.pathname;return"/"===e?r.a.createElement(v.a,{to:"topstories"}):e.split("/")[2]?r.a.createElement(W,null):r.a.createElement(R,null)}}]),t}(r.a.Component),Q=Object(v.e)(J),$=Object(s.createLogger)(),q=Object(l.createStore)(d,Object(g.composeWithDevTools)(Object(l.applyMiddleware)(i.a,$)));o.a.render(r.a.createElement(function(){return r.a.createElement(u.a,{store:q},r.a.createElement(m.a,{basename:"/hacker-news"},r.a.createElement(Q,null)))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,1,2]]]);
//# sourceMappingURL=main.af2ea984.chunk.js.map